# Lint, format check, and test on every pull request.
name: CI

on:
  pull_request:

jobs:
  lint:
    name: ğŸ“‹ Lint
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ Checkout repository
        uses: actions/checkout@v4

      - name: âš™ï¸ Setup project
        uses: ./.github/actions/setup

      - name: ğŸ” Run Oxlint
        run: npm run lint

  format:
    name: âœ¨ Format
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ Checkout repository
        uses: actions/checkout@v4

      - name: âš™ï¸ Setup project
        uses: ./.github/actions/setup

      - name: ğŸ¨ Check formatting (Oxfmt)
        run: npm run format:check

  test:
    name: ğŸ§ª Test
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ Checkout repository
        uses: actions/checkout@v4

      - name: âš™ï¸ Setup project
        uses: ./.github/actions/setup

      - name: ğŸ“¦ Build plugin
        run: npm run build

      - name: âœ… Run tests
        run: npm run test
